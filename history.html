<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Cotion - Upload History</title>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="styles.css">
    </head>
    
    <body>
        <div class="header">
            <h1>Upload History</h1>
        </div>

        <!-- History section -->
        <div class="history">
            <h2>History</h2>
            <!-- Fetch history data from database and display it here -->
            <?php
                // Create connection
                $conn = new mysqli($servername, $username, $password, $dbname);

                // Check connection
                if ($conn->connect_error) {
                    die("Connection failed: " . $conn->connect_error);
                }

                // Fetch data from table
                $sql = "SELECT upload_date, file_name, total_score FROM history";
                $result = $conn->query($sql);

                if ($result->num_rows > 0) {
                    // output data of each row
                    while($row = $result->fetch_assoc()) {
                        echo "<h3>Upload Date: " . $row["upload_date"]. "</h3><p>File Name: " . $row["file_name"]. "</p><p>Total Score: " . $row["total_score"]. "</p><hr>";
                    }
                } else {
                    echo "No history";
                }
                $conn->close();
            ?>
        </div>

        <!-- Feedback section -->
        <div class="feedback">
            <h2>Feedback</h2>
            <!-- Fetch feedback data from database and display it here -->
            <?php
                // Create connection
                $conn = new mysqli($servername, $username, $password, $dbname);

                // Check connection
                if ($conn->connect_error) {
                    die("Connection failed: " . $conn->connect_error);
                }

                // Fetch data from table
                $sql = "SELECT judge_name, score, comments FROM feedback";
                $result = $conn->query($sql);

                if ($result->num_rows > 0) {
                    // output data of each row
                    while($row = $result->fetch_assoc()) {
                        echo "<h3>Judge Name: " . $row["judge_name"]. "</h3><p>Score: " . $row["score"]. "</p><p>Comments: " . $row["comments"]. "</p><hr>";
                    }
                } else {
                    echo "No feedback";
                }
                $conn->close();
            ?>
        </div>
    </body>
</html>
